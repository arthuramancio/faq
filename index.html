<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FAQ FaceSchool</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<style>
body {
    background-color: #F2F2F2;
    color: #333333;
}
h1 {
    color: #2F80ED;
}
.accordion-button {
    background-color: #2F80ED;
    color: white;
}
.accordion-button:not(.collapsed) {
    background-color: #56CCF2;
}
.accordion-body {
    background-color: white;
}
</style>
</head>
<body>
<div class="container py-4">
    <h1 class="text-center mb-4">FAQ FaceSchool</h1>
    <input type="text" id="searchInput" class="form-control mb-4" placeholder="Pesquisar perguntas...">
    <div id="faq-container"></div>
</div>

<script>
const faqData = [
  {
    id: "dashboard-relatorios",
    title: "Dashboard e Relatórios",
    questions: [
      { question: "Como acessar o Dashboard?", answer: "Acesse o painel através do menu principal, clicando em 'Dashboard'." },
      { question: "Como gerar relatórios personalizados?", answer: "Vá para a seção 'Relatórios', selecione os filtros desejados e clique em 'Gerar'." }
    ]
  },
  {
    id: "reconhecimento-facial",
    title: "Reconhecimento Facial",
    questions: [
      { question: "Como funciona o reconhecimento facial?", answer: "A câmera identifica o rosto do aluno e confirma a presença." }
    ]
  },
  {
    id: "manejo-alunos",
    title: "Manejo de Alunos",
    questions: [
      { question: "Como cadastrar um aluno?", answer: "Acesse a seção 'Manejo de Alunos' e clique em 'Adicionar'." }
    ]
  },
  {
    id: "comunicados-mensagens",
    title: "Comunicados e Mensagens",
    questions: [
      { question: "Como enviar um comunicado?", answer: "Acesse a seção 'Comunicados' e clique em 'Novo Comunicado'." }
    ]
  },
  {
    id: "presenca-justificativa",
    title: "Presença e Justificativa",
    questions: [
      { question: "Como justificar uma falta?", answer: "Clique no nome do aluno e depois em 'Justificar'." }
    ]
  },
  {
    id: "integracoes",
    title: "Integrações",
    questions: [
      { question: "Quais sistemas são integrados?", answer: "Atualmente, integramos com sistema X e Y." }
    ]
  },
  {
    id: "funcionalidades",
    title: "Funcionalidades Gerais",
    questions: [
      { question: "Quais funcionalidades gerais estão disponíveis?", answer: "Oferecemos relatórios, controle de presença, entre outros." }
    ]
  }
];

const faqContainer = document.getElementById("faq-container");
const searchInput = document.getElementById("searchInput");

function escapeRegex(string) {
  return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
}

function highlight(text, search) {
  const escapedSearch = escapeRegex(search);
  const regex = new RegExp(`(${escapedSearch})`, "gi");
  return text.replace(regex, "<mark>$1</mark>");
}


function renderFAQs() {
  faqContainer.innerHTML = "";
  faqData.forEach(category => {
    const section = document.createElement("section");
    section.id = category.id;
    section.innerHTML = `<h2 class="mt-4">${category.title}</h2>`;

    const accordionId = "accordion-" + category.id;
    const accordion = document.createElement("div");
    accordion.className = "accordion";
    accordion.id = accordionId;

    category.questions.forEach((q, index) => {
      const item = document.createElement("div");
      item.className = "accordion-item";

      item.innerHTML = `
        <h2 class="accordion-header" id="heading-${category.id}-${index}">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse-${category.id}-${index}">
            ${q.question}
          </button>
        </h2>
        <div id="collapse-${category.id}-${index}" class="accordion-collapse collapse" data-bs-parent="#${accordionId}">
          <div class="accordion-body">${q.answer}</div>
        </div>
      `;
      accordion.appendChild(item);
    });

    section.appendChild(accordion);
    faqContainer.appendChild(section);
  });
}

searchInput.addEventListener("input", () => {
  const searchTerm = searchInput.value.toLowerCase();
  document.querySelectorAll(".accordion-item").forEach(item => {
    const question = item.querySelector(".accordion-button").textContent.toLowerCase();
    const answer = item.querySelector(".accordion-body").textContent.toLowerCase();
    if (question.includes(searchTerm) || answer.includes(searchTerm)) {
      item.style.display = "block";
      if (searchTerm) {
        item.querySelector(".accordion-button").innerHTML = highlight(item.querySelector(".accordion-button").textContent, searchTerm);
        item.querySelector(".accordion-body").innerHTML = highlight(item.querySelector(".accordion-body").textContent, searchTerm);
      } else {
        item.querySelector(".accordion-button").innerHTML = item.querySelector(".accordion-button").textContent;
        item.querySelector(".accordion-body").innerHTML = item.querySelector(".accordion-body").textContent;
      }
    } else {
      item.style.display = "none";
    }
  });
});

renderFAQs();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
